#------ MONITOR ---------------------------------------------------------------------#
monitor=, 1920x1080@60,0x0, 1.25
xwayland {
   force_zero_scaling = true
}

#------ MY PROGRAMs -----------------------------------------------------------------#
$terminal = ghostty
$fileManager = nautilus
$menu = rofi -show drun
$browser = zen-browser


#------ AUTOSTART -------------------------------------------------------------------#

exec-once = vmtouch -l /home/shanflinch/.config/rice/tomie/
exec-once = swww-daemon
exec-once = /home/shanflinch/.config/scripts/wallpaper.sh
exec-once = waybar
exec-once = gnome-keyring-daemon --start --components=secrets
exec-once = swaync
exec-once = nm-applet
exec-once = hyprpm reload
exec-once = hypridle

exec-once = [workspace 1 silent] $terminal -e tmux attach-session
exec-once = [workspace 2 silent] $browser
# exec-once = [workspace 3 silent] 
# exec-once = [workspace 4 silent] godot
# exec-once = [workspace 5 silent] spotify


#------ ENVIRONMENT VARIABLES -------------------------------------------------------#

env = XCURSOR_SIZE,32
env = HYPRCURSOR_SIZE,32
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland

#-----PERMISSIONS---------------------------------------------------------## See https://wiki.hypr.land/Configuring/Permissions/
# Please note permission changes here require a Hyprland restart and are not applied on-the-fly for security reasons

# ecosystem {
#   enforce_permissions = 1
# }

# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow


#------ LOOK AND FEEL ---------------------------------------------------------------#
general {
    gaps_in = 6
    gaps_out = 6,20,20,20
    border_size = 8
    col.active_border = rgb(e6e6e6)
    col.inactive_border = rgb(e6e6e6)
    resize_on_border = true
    layout = master
}
decoration {
    active_opacity = 1.0
    inactive_opacity = 1.0
    shadow {
        enabled = true
        range = 4
        render_power = 3
	sharp = true
        color = rgb(050505)
    }
    blur {
        enabled = false
    }
}


#------ ANIMATIONS ------------------------------------------------------------------#
animations {
    enabled = true
    bezier = instant, 1, 0, 1, 0
    bezier = linear, 0,0,1,1
    bezier = myBezier, 0.05, 0.8, 0.1, 1

    animation = windows, 1, 2.5, myBezier, slide
    animation = windowsIn, 1, 2.5, myBezier, gnomed
    animation = windowsOut, 1, 2, myBezier, gnomed
    
    animation = fade, 1, 2, linear
    animation = fadeOut, 1, 2, instant

    animation = layers, 1, 2.7, myBezier, slide
    animation = layersIn, 1, 2.7, myBezier, slide
    animation = layersOut, 1, 2.7, myBezier, slide

    animation = workspacesOut, 1, 2.5, instant, fade
    animation = workspacesIn, 1, 2, linear, slide
    # animation = specialWorkspaceOut, 1, 2.5, instant, fade
    # animation = specialWorkspaceIn, 1, 2, linear, slidevert
}
 
#------ LAYOUT ----------------------------------------------------------------------#
dwindle {
    pseudotile = true
    preserve_split = true
}
master {
    mfact = 0.66
    new_status = slave
    new_on_top = false
}
misc {
    force_default_wallpaper = 0
    vfr = true
    disable_hyprland_logo = true
}

#------ PLUGINS ---------------------------------------------------------------------#
plugin {
	hyprfocus{
        mode = slide
		slide_height = 25
		animations {
			animation = hyprfocusIn, 1, 1.7, myBezier
			animation = hyprfocusOut, 1, 1.7, myBezier
        }
	}
}

#------ INPUT -----------------------------------------------------------------------#
input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    touchpad {
        natural_scroll = false
    }
}
# See https://wiki.hypr.land/Configuring/Gestures
gesture = 3, horizontal, workspace


#------ KEYBINDINGS -----------------------------------------------------------------#
$mainMod = SUPER
bind = $mainMod, DELETE, killactive,

bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, E, exec, $terminal -e yazi
bind = $mainMod, SPACE, exec, $menu
bind = $mainMod SHIFT, W, exec, killall waybar || waybar

bind = $mainMod, T, layoutmsg, orientationcycle right left
bind = $mainMod, Y, layoutmsg, orientationcenter
bind = $mainMod, U, layoutmsg, orientationcycle top bottom

bind = $mainMod, F, fullscreen, 0
bind = $mainMod, V, togglefloating,

bind = $mainMod, TAB, layoutmsg, focusmaster master
bind = $mainMod SHIFT, TAB, layoutmsg, swapwithmaster ignoremaster

bind = $mainMod, J, layoutmsg, cyclenext noloop
bind = $mainMod, K, layoutmsg, cycleprev noloop

bind = $mainMod, N, layoutmsg, rollnext
bind = $mainMod, P, layoutmsg, rollprev

bind = $mainMod SHIFT, J, layoutmsg, swapnext noloop
bind = $mainMod SHIFT, K, layoutmsg, swapprev noloop

bind = $mainMod, 1, exec, ~/dotfiles/scripts/workspace_anim.sh 1
bind = $mainMod, 2, exec, ~/dotfiles/scripts/workspace_anim.sh 2
bind = $mainMod, 3, exec, ~/dotfiles/scripts/workspace_anim.sh 3
bind = $mainMod, 4, exec, ~/dotfiles/scripts/workspace_anim.sh 4
bind = $mainMod, 5, exec, ~/dotfiles/scripts/workspace_anim.sh 5
bind = $mainMod, 6, exec, ~/dotfiles/scripts/workspace_anim.sh 6
bind = $mainMod, 7, exec, ~/dotfiles/scripts/workspace_anim.sh 7
bind = $mainMod, 8, exec, ~/dotfiles/scripts/workspace_anim.sh 8
bind = $mainMod, 9, exec, ~/dotfiles/scripts/workspace_anim.sh 9

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9

bindm = $mainMod, mouse:272, movewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -n0 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -n0 set 5%-

# Screenshot 
bind = , Print, exec, grim -g "$(slurp)" - | wl-copy && wl-paste > ~/pictures/screenshots/screenshot-$(date +%F_%T).png | notify-send "Screenshot" "Screenshot of the region taken" -t 1500 | pw-play /usr/share/sounds/freedesktop/stereo/screen-capture.oga
bind = SHIFT, Print, exec, grim - | wl-copy && wl-paste > ~/pictures/screenshots/screenshot-$(date +%F_%T).png | notify-send "Screenshot" "Screenshot of whole screen taken" -t 1500 | pw-play /usr/share/sounds/freedesktop/stereo/screen-capture.oga
bind = CTRL, Print, exec, grim -g "$(hyprctl activewindow -j | jq -r '"\(.at[0]),\(.at[1]) \(.size[0])x\(.size[1])"')" - | wl-copy && wl-paste > ~/pictures/screenshots/Screenshot_$(date +%F_%T).png | notify-send "Screenshot" "Active window captured" -t 1500 | pw-play /usr/share/sounds/freedesktop/stereo/screen-capture.oga

# Requires playerctl
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPause, exec, playerctl play-pause
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioPrev, exec, playerctl previous

#------ WINDOWS AND WORKSPACES ------------------------------------------------------#

layerrule = match:namespace rofi, dim_around on
layerrule = match:namespace swaync-control-center, dim_around on
layerrule = match:namespace swaync-control-center, animation slide right

windowrule {    # Ignore maximize requests from all apps. You'll probably like this.
    name = suppress-maximize-events
    match:class = .*
    suppress_event = maximize
}
windowrule {    # Fix some dragging issues with XWayland
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false
    no_focus = true
}

windowrule {
    name = aseprite
    match:class = Aseprite
    tile = true
    border_size = 4
}
windowrule = match:class zen, border_size 0
